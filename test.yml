---
- hosts: all
  become: false
  gather_facts: no
  tasks:
    - name: check if we are able to ssh
      shell:
         "whoami; cd /tmp ; ls -l"
      register: output
      
    - name: Print variable
      debug:
        msg: "Printing var {{output.stdout_lines}}"

 #   - name: Synchronization of src on the inventory host to the dest on the localhost in pull mode
 #     ansible.posix.synchronize:
  #      mode: pull
 #       src: /tmp/log1/
 #       dest: /tmp/vish/logpulled
    - name: check if rsync package is installed
      ansible.builtin.package:
        name: rsync
        state: present
      become: true
      
   # - name: sync from src to dest
   #   ansible.posix.synchronize:
   #     src: /home
   #     dest: backup

    - name: sync from dest to src
      ansible.posix.synchronize:
        mode: pull
        src: /home/ansible
        dest: pulled_data
